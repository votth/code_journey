<!DOCTYPE html><html lang="en-us"><head>

        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width"><meta property="og:description" content="Harvard University's introduction to the intellectual enterprises of computer science and the art of programming.">

        <meta property="og:image" content="https://img.youtube.com/vi/NZxALvNlF-8/maxresdefault.jpg"><meta property="og:title" content="Lecture 4 - CS50x 2022">

        <link href="../../favicon.ico%3F1644944113" rel="icon">

        <!-- https://fonts.google.com/specimen/PT+Sans?query=PT+Sans&selection.family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700 -->
        <script src="../../../../../ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>

        <!-- http://getbootstrap.com/docs/4.6/getting-started/introduction/ -->
        <script src="../../assets/jquery/dist/jquery.min.js%3F1644944113"></script>
        <script src="../../assets/bootstrap/dist/js/bootstrap.bundle.min.js%3F1644944113"></script>

        <!-- https://bootstrap-table.com/docs/getting-started/introduction/ -->
        <link href="../../assets/bootstrap-table/dist/bootstrap-table.min.css%3F1644944113.css" rel="stylesheet">
        <script src="../../assets/bootstrap-table/dist/bootstrap-table.min.js%3F1644944113"></script>
        <script src="../../assets/bootstrap-table/dist/extensions/mobile/bootstrap-table-mobile.min.js%3F1644944113"></script>

        <!-- https://fontawesome.com/how-to-use/on-the-web/referencing-icons/basic-use -->
        <link href="../../assets/@fortawesome/fontawesome-free/css/all.min.css%3F1644944113.css" rel="stylesheet">

        <!-- https://moment.github.io/luxon/ -->
        <script src="../../assets/luxon.min.js%3F1644944113"></script>

        <!-- http://docs.mathjax.org/ -->
        <!-- https://www.jsdelivr.com/package/npm/mathjax?path=es5 -->
        <script crossorigin="anonymous" integrity="sha256-+nfSJ1LiSvANSK3wvi6FjM+oFwoIQvURU1frozp5z6o=" src="../../../../../cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-chtml.js"></script>

        <!-- https://github.com/verlok/vanilla-lazyload -->
        <script src="../../../../../cdn.jsdelivr.net/npm/intersection-observer@0.7.0/intersection-observer.js"></script>
        <script src="../../../../../cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.0/dist/lazyload.min.js"></script>

        <!-- https://github.com/davidjbradshaw/iframe-resizer -->
        <!-- https://www.jsdelivr.com/package/npm/iframe-resizer?path=js -->
        <script crossorigin="anonymous" integrity="sha256-S8f0Q/V9VcfrqYgWo9EFS9zuDMdPTBMC+CBW0RjxQbs=" src="../../../../../cdn.jsdelivr.net/npm/iframe-resizer@4.3.1/js/iframeResizer.min.js"></script>

        <!-- https://github.com/scratchblocks/scratchblocks/releases -->
        <script src="../../assets/scratchblocks.min.js%3F1644944113"></script>

        

        <link href="../../assets/page.css%3F1644944113.css" rel="stylesheet">
        <script src="../../assets/jekyll-theme-cs50.js%3F1644944113"></script>

        <script>
            window.CS50 = {
                local: {"day":"numeric","hour":"numeric","minute":"numeric","month":"long","timeZoneName":"short","weekday":"long","year":"numeric"},
                locale: "en",
                tz: "America/New_York"
            };
        </script>

        <title>Lecture 4 - CS50x 2022</title>


    </head>

    <body class="invisible">

        <div class="alert fixed-top mb-0 rounded-0 shadow" data-alert="success dismissible" data-hash="782d210245d8ce7e794ac7e84a246c5f" id="alert" role="alert">
            <button aria-label="Close" class="btn-close d-none" data-bs-dismiss="alert" type="button"></button><p>This is CS50x 2022. Interested in <a href="https://cs50.harvard.edu/x/2022/#how-to-take-this-course">a verified certificate, a professional certificate, or transfer credit and accreditation</a>? <strong>Like to attend <a href="https://cs50.harvard.edu/x/2022/movie/">CS50x Movie Night</a> on <span data-local="2022-02-12T13:00:00-05:00/2022-02-12T15:00:00-05:00"></span>?</strong>
And get vaccinated (as soon as it‚Äôs available to you). üíâ <a href="https://www.who.int/news-room/feature-stories/detail/getting-the-covid-19-vaccine">Here‚Äôs why</a>. <a href="https://www.google.com/search?q=covid-19+vaccine+finder">Here‚Äôs how</a>.</p></div>
        

        <div class="container-fluid">

            <div class="row">

                <aside class="col-md">
 
                    <header><h1 data-id="this-is-cs50x"><a href="https://cs50.harvard.edu/x/2022/">This is CS50x</a></h1>

<p>OpenCourseWare</p>

<p><a class="pr-1 small" href="https://cs50.harvard.edu/donate">Donate<i aria-hidden="true" class="fas fa-external-link-alt ps-2"></i></a></p>

<p><a href="https://cs.harvard.edu/malan/">David J. Malan</a>
<br>
<a href="mailto:malan@harvard.edu">malan@harvard.edu</a>
<br>
<a class="mr-1" href="https://www.facebook.com/dmalan"><i aria-hidden="true" class="fab fa-facebook-f" title="Facebook"></i><span class="sr-only">Facebook</span></a>
<a class="mr-1" href="https://github.com/dmalan"><i aria-hidden="true" class="fab fa-github" title="GitHub"></i><span class="sr-only">GitHub</span></a>
<a class="mr-1" href="https://www.instagram.com/davidjmalan/"><i aria-hidden="true" class="fab fa-instagram" title="Instagram"></i><span class="sr-only">Instagram</span></a>
<a class="mr-1" href="https://www.linkedin.com/in/malan/"><i aria-hidden="true" class="fab fa-linkedin" title="LinkedIn"></i><span class="sr-only">LinkedIn</span></a>
<a class="mr-1" href="https://orcid.org/0000-0001-5338-2522"><i aria-hidden="true" class="fab fa-orcid" title="ORCID"></i><span class="sr-only">ORCID</span></a>
<a class="mr-1" href="https://www.quora.com/profile/David-J-Malan"><i aria-hidden="true" class="fab fa-quora" title="Quora"></i><span class="sr-only">Quora</span></a>
<a class="mr-1" href="https://www.reddit.com/user/davidjmalan"><i aria-hidden="true" class="fab fa-reddit-alien" title="Reddit"></i><span class="sr-only">Reddit</span></a>
<a class="mr-1" href="https://www.tiktok.com/@davidjmalan"><i aria-hidden="true" class="fab fa-tiktok" title="TikTok"></i><span class="sr-only">Twitter</span></a>
<a class="mr-1" href="https://twitter.com/davidjmalan"><i aria-hidden="true" class="fab fa-twitter" title="Twitter"></i><span class="sr-only">Twitter</span></a></p></header>

                    

                    <button aria-controls="nav" aria-expanded="false" class="btn btn-sm collapsed d-md-none" data-bs-target="aside > nav" data-bs-toggle="collapse">
                        Menu
                    </button>

                    <nav class="collapse d-md-block" id="nav"><hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/movie/">üçø CS50x Movie Night 2022</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/puzzles/"><i class="fas fa-puzzle-piece pe-2"></i>CS50x Puzzle Day 2022</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/prepare/"><i class="fas fa-book pe-2"></i>How to Prepare for Technical Interviews</a></li>
  <li data-marker="*"><a href="https://cs50.ly/zoom"><i class="fas fa-video pe-2"></i>Zoom Meetings</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/workshop/">CS50 Educator Workshop</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/gallery/">Gallery of Final Projects<span aria-hidden="true" class="ps-2 text-decoration-none">üñºÔ∏è </span></a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/new/">What‚Äôs new for 2022?</a></li>
</ul>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/0/">Week 0</a> Scratch</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/1/">Week 1</a> C</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/2/">Week 2</a> Arrays</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/3/">Week 3</a> Algorithms</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/4/">Week 4</a> Memory</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/5/">Week 5</a> Data Structures</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/6/">Week 6</a> Python</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/7/">Week 7</a> SQL</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/8/">Week 8</a> HTML, CSS, JavaScript</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/9/">Week 9</a> Flask</li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/weeks/10/">Week 10</a> Emoji</li>
</ul>
<ul>
  <li data-marker="*" class="small"><a href="https://cs50.harvard.edu/x/2022/weeks/cybersecurity/">Cybersecurity</a></li>
</ul>
<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/seminars/">Seminars</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/project/">Final Project</a></li>
</ul>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/honesty/">Academic Honesty</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/certificate/">CS50 Certificate</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/faqs/">FAQs</a></li>
  <li data-marker="*"><a href="https://cs50.me/cs50x">Gradebook</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/staff/">Staff</a></li>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/syllabus/">Syllabus</a></li>
</ul>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.edx.org/ed">Ed Discussion</a> for Q&amp;A</li>
  <li data-marker="*" class="small"><a href="https://us.edstem.org/quickstart/ed-discussion.pdf">Quick Start Guide</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://cs50.edx.org/">edX</a></li>
  <li data-marker="*"><a href="https://www.youtube.com/playlist?list=PLhQjrBD2T383f9scHRNYJkior2VvYjpSL">YouTube</a> HDR</li>
  <li data-marker="*"><a href="https://www.youtube.com/playlist?list=PLhQjrBD2T380Xnv_v683p6UjiKJZe13ki">YouTube</a> SDR</li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://man.cs50.io/">Manual Pages</a></li>
  <li data-marker="*"><a href="https://cs50.readthedocs.io/style/c/">Style Guide</a></li>
  <li data-marker="*"><a href="https://code.cs50.io/">Visual Studio Code</a></li>
</ul>

<hr>

<ul class="small">
  <li data-marker="*"><a href="https://cs50.noticeable.news/">Changelog</a></li>
  <li data-marker="*"><a href="https://cs50.statuspage.io/">Status Page</a></li>
</ul>

<hr>

<ul>
  <li data-marker="*"><a href="https://cs50.harvard.edu/x/2022/communities/"><strong>Communities</strong></a></li>
  <li data-marker="*" class="small"><a href="https://www.clubhouse.com/club/cs50">Clubhouse</a></li>
  <li data-marker="*" class="small"><a href="https://discord.gg/cs50">Discord</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://cs50.edx.org/ed">Ed</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://www.facebook.com/groups/cs50/">Facebook Group</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://www.facebook.com/cs50/">Facebook Page</a></li>
  <li data-marker="*" class="small"><a href="https://github.com/cs50">GitHub</a></li>
  <li data-marker="*" class="small"><a href="https://gitter.im/cs50/x">Gitter</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://instagram.com/cs50">Instagram</a></li>
  <li data-marker="*" class="small"><a href="https://www.linkedin.com/groups/7437240/">LinkedIn Group</a></li>
  <li data-marker="*" class="small"><a href="https://www.linkedin.com/school/CS50/">LinkedIn Page</a></li>
  <li data-marker="*" class="small"><a href="https://cs50.medium.com/">Medium</a></li>
  <li data-marker="*" class="small"><a href="https://www.quora.com/topic/CS50">Quora</a></li>
  <li data-marker="*" class="small"><a href="https://www.reddit.com/r/cs50/">Reddit</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://cs50.edx.org/slack">Slack</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://www.snapchat.com/add/cs50">Snapchat</a></li>
  <li data-marker="*" class="small"><a href="https://soundcloud.com/cs50">SoundCloud</a></li>
  <li data-marker="*" class="small"><a href="https://cs50.stackexchange.com/">Stack Exchange</a> <span class="badge bg-light ms-1 py-1 rounded-pill text-dark">Q&amp;A</span></li>
  <li data-marker="*" class="small"><a href="https://www.tiktok.com/@cs50">TikTok</a></li>
  <li data-marker="*" class="small"><a href="https://twitter.com/cs50">Twitter</a></li>
  <li data-marker="*" class="small"><a href="http://www.youtube.com/subscription_center?add_user=cs50tv">YouTube</a></li>
</ul>

<hr>

<p><a href="https://cs50.harvardshop.com/"><img src="../../../../../i.imgur.com/GGMdcKt.png" alt="Harvard Shop"></a></p>

<hr>

<p><a href="https://cs50.harvard.edu/x/2022/license/" class="small"><i class="fab fa-creative-commons me-1"></i>License</a></p></nav>

                    <footer></footer>

                </aside>

                <main class="col-md">

                    <h1 class="no_toc" id="lecture-4">Lecture 4</h1>

<ul id="markdown-toc">
  <li><a href="index.html#pixels" id="markdown-toc-pixels">Pixels</a></li>
  <li><a href="index.html#hexadecimal" id="markdown-toc-hexadecimal">Hexadecimal</a></li>
  <li><a href="index.html#addresses-pointers" id="markdown-toc-addresses-pointers">Addresses, pointers</a></li>
  <li><a href="index.html#strings" id="markdown-toc-strings">Strings</a></li>
  <li><a href="index.html#pointer-arithmetic" id="markdown-toc-pointer-arithmetic">Pointer arithmetic</a></li>
  <li><a href="index.html#compare-and-copy" id="markdown-toc-compare-and-copy">Compare and copy</a></li>
  <li><a href="index.html#memory-allocation" id="markdown-toc-memory-allocation">Memory allocation</a></li>
  <li><a href="index.html#valgrind" id="markdown-toc-valgrind">valgrind</a></li>
  <li><a href="index.html#garbage-values" id="markdown-toc-garbage-values">Garbage values</a></li>
  <li><a href="index.html#swap" id="markdown-toc-swap">Swap</a></li>
  <li><a href="index.html#memory-layout" id="markdown-toc-memory-layout">Memory layout</a></li>
  <li><a href="index.html#scanf" id="markdown-toc-scanf">scanf</a></li>
  <li><a href="index.html#files" id="markdown-toc-files">Files</a></li>
  <li><a href="index.html#jpeg" id="markdown-toc-jpeg">JPEG</a></li>
</ul>

<h2 id="pixels">Pixels</h2>

<ul>
  <li data-marker="*">Last week, we took a look at memory and how we could use arrays to store data.</li>
  <li data-marker="*">We might zoom in further and further in an image, but very soon we‚Äôll see individual pixels, like the ones in this puppet‚Äôs eye:<br>
<img src="eyes.png" alt="individual pixels forming an eye" width="400">
    <ul>
      <li data-marker="*">Since this image is stored with a finite number of bytes, each perhaps representing a red, green, or blue value for each pixel, there is in turn a finite number of pixels we can see.</li>
    </ul>
  </li>
  <li data-marker="*">A simpler image of a smiley face might be represented with a single bit per pixel:<br>
<img src="smiley.png" alt="1s and 0s in a grid next to a pixelated smiley face" width="600"></li>
  <li data-marker="*">We can visit <a href="https://cs50.ly/art">cs50.ly/art</a> with a Google Account to make a copy of a spreadsheet, which we can then fill with colors to create our own <a href="https://en.wikipedia.org/wiki/Pixel_art">pixel art</a>.</li>
  <li data-marker="*"><a href="https://en.wikipedia.org/wiki/Adobe_Photoshop">Adobe Photoshop</a>, a popular image editing software, includes a color picker that looks like this:<br>
<img src="color_picker.png" alt="a gradient of colors with black selected, 0 for R, G, B values, a hexadecimal value of #000000, and other values" width="400">
    <ul>
      <li data-marker="*">Here, the color black is selected, and we see that the values for R, G, and B, or red, green, and blue respectively, are all 0. Furthermore, we see another value, #000000 that seems to represent all three values for the color black.</li>
    </ul>
  </li>
  <li data-marker="*">We take a look at a few more colors:
    <ul>
      <li data-marker="*">white, with R: 255, G: 255, and B: 255, and #FFFFFF</li>
      <li data-marker="*">red, with R: 255, G: 0, and B: 0, and #FF0000</li>
      <li data-marker="*">green, with R: 0, G: 255, and B: 0, and #00FF00</li>
      <li data-marker="*">blue, with R: 0, G: 0, and B: 255, and #0000FF</li>
    </ul>
  </li>
</ul>

<h2 id="hexadecimal">Hexadecimal</h2>

<ul>
  <li data-marker="*">We might notice a pattern for the new notation, where it appears that each value for red, green, and blue are represented with two character. It turns out that there‚Äôs another base system, <strong>hexadecimal</strong>, or base-16, where there are 16 digits:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 1 2 3 4 5 6 7 8 9 A B C D E F
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The digits start with 0 through 9, and continue with A through F as equivalents to the decimal values of 10 through 15.</li>
    </ul>
  </li>
  <li data-marker="*">Let‚Äôs consider a two-digit hexadecimal number:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>16^1 16^0
   0    0
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Here, the <code class="language-plaintext highlighter-rouge">0</code> in the ones place (since \(16^0 = 1\)) has a decimal value of 0. We‚Äôll count up, and after <code class="language-plaintext highlighter-rouge">09</code> we‚Äôll use <code class="language-plaintext highlighter-rouge">0A</code> to represent 10 in decimal.</li>
      <li data-marker="*">We can keep counting until <code class="language-plaintext highlighter-rouge">0F</code>, which is equivalent to 15 in decimal.</li>
    </ul>
  </li>
  <li data-marker="*">After <code class="language-plaintext highlighter-rouge">0F</code>, we need to carry the one, as we would go from 9 to 10 in decimal:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>16^1 16^0
   1    0
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Here, the <code class="language-plaintext highlighter-rouge">1</code> has a value of \(16^1 \times 1 = 16\), so <code class="language-plaintext highlighter-rouge">10</code> in hexadecimal is 16 in decimal.</li>
    </ul>
  </li>
  <li data-marker="*">With two digits, we can have a maximum value of <code class="language-plaintext highlighter-rouge">FF</code>, or \(16^1 \times 15 + 16^0 \times 15 = 16 \times 15 + 1 \times 15 = 240 + 15 = 255\).
    <ul>
      <li data-marker="*">The values in a computer‚Äôs memory are still stored as binary, but this way of representation helps us humans represent larger numeric values with fewer digits needed.</li>
      <li data-marker="*">With 8 bits in binary, the highest value we can count to is also 255, with <code class="language-plaintext highlighter-rouge">11111111</code>. So two digits in hexadecimal can conveniently represent the value of a byte in binary. (Each digit in hexadecimal, with 16 values, maps to four bits in binary.)</li>
    </ul>
  </li>
</ul>

<h2 id="addresses-pointers">Addresses, pointers</h2>

<ul>
  <li data-marker="*">For our computer‚Äôs memory, too, we‚Äôll see hexadecimal used to describe each address or location:<br>
<img src="addresses.png" alt="grid representing bytes in memory with 0x0, 0x1, ..., 0x1F under each" width="600">
    <ul>
      <li data-marker="*">By writing <code class="language-plaintext highlighter-rouge">0x</code> in front of a hexadecimal value, we can distinguish them from decimal values.</li>
    </ul>
  </li>
  <li data-marker="*">We might create a value <code class="language-plaintext highlighter-rouge">n</code>, and print it out:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">In our computer‚Äôs memory, there are now 4 bytes somewhere that have the binary value of 50, with some value for its address, like <code class="language-plaintext highlighter-rouge">0x123</code>:<br>
<img src="50.png" alt="grid representing bytes, with four boxes together containing 50 with small 0x123 underneath" width="600"></li>
  <li data-marker="*">A <strong>pointer</strong> is a variable that stores an address in memory, where some other variable might be stored.</li>
  <li data-marker="*">The <strong><code class="language-plaintext highlighter-rouge">&amp;</code></strong> operator can be used to get the address of some variable, as with <code class="language-plaintext highlighter-rouge">&amp;n</code>. And the <code class="language-plaintext highlighter-rouge">*</code> operator declares a variable as a pointer, as with <code class="language-plaintext highlighter-rouge">int *p</code>, indicating that we have a variable called <code class="language-plaintext highlighter-rouge">p</code> that <em>points to</em> an <code class="language-plaintext highlighter-rouge">int</code>. So, to store the address of a variable <code class="language-plaintext highlighter-rouge">n</code> into a pointer <code class="language-plaintext highlighter-rouge">p</code>, we would write:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">In C, we can actually see the address with the <code class="language-plaintext highlighter-rouge">&amp;</code> operator, which means ‚Äúget the address of this variable‚Äù:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
0x7ffcb4578e5c
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">%p</code> is the format code to print an address with <code class="language-plaintext highlighter-rouge">printf</code>. And we only need to use the name of the variable, <code class="language-plaintext highlighter-rouge">p</code>, after we‚Äôve declared it.</li>
      <li data-marker="*">In our instance of VS Code, we see an address with a large value like <code class="language-plaintext highlighter-rouge">0x7ffcb4578e5c</code>. The value of the address in itself is not significant, since it‚Äôs just some location in memory that the variable is stored in; instead, the important idea is that we can <em>use</em> this address later.</li>
      <li data-marker="*">We can run this program a few times, and see that the address of <code class="language-plaintext highlighter-rouge">n</code> in memory changes, since different addresses in memory will be available at different times.</li>
    </ul>
  </li>
  <li data-marker="*">With C, we can also go to specific addresses in memory, which might cause <strong>segmentation faults</strong>, where we‚Äôve tried to read or write to memory we don‚Äôt have permission to.</li>
  <li data-marker="*">The <code class="language-plaintext highlighter-rouge">*</code> operator is also the <strong>dereference operator</strong>, which goes to an address to get the value stored there. For example, we can say:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./address
0x7ffda0a4767c
50
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, we see the value of the pointer itself (an address), and then the value at the address with <code class="language-plaintext highlighter-rouge">*p</code>, which is <code class="language-plaintext highlighter-rouge">50</code>.</li>
      <li data-marker="*">Since we declared <code class="language-plaintext highlighter-rouge">p</code> to be an <code class="language-plaintext highlighter-rouge">int *</code>, the compiler knows that <code class="language-plaintext highlighter-rouge">*p</code> is an <code class="language-plaintext highlighter-rouge">int</code>, so the right number of bytes are read.</li>
    </ul>
  </li>
  <li data-marker="*">In memory, we might have one variable, <code class="language-plaintext highlighter-rouge">p</code>, with the value of some address, like <code class="language-plaintext highlighter-rouge">0x123</code>, stored, and another variable, an integer with the value <code class="language-plaintext highlighter-rouge">50</code>, at that addresss:<br>
<img src="p.png" alt="one box containing 0x123 labeled p pointing at smaller box containing 50 labeled 0x123" width="600">
    <ul>
      <li data-marker="*">Notice that <code class="language-plaintext highlighter-rouge">p</code> takes up 8 bytes, since in modern computer systems, 64 bits are used in order to address the billions of bytes of memory available. With 32 bits, we can only count up to about 4 billion bytes, or about 4GB of memory.</li>
    </ul>
  </li>
  <li data-marker="*">We can abstract away the actual value of the addresses, since they‚Äôll be different as we declare variables in our programs. We can simply think of <code class="language-plaintext highlighter-rouge">p</code> as pointing at some value in memory:<br>
<img src="pointing.png" alt="one box containing p pointing at smaller box containing 50" width="600"></li>
  <li data-marker="*">In the real world, we might have a mailbox labeled ‚Äúp‚Äù, among many mailboxes with addresses. Inside our mailbox, we can put a value like <code class="language-plaintext highlighter-rouge">0x123</code>, which is the address of some other mailbox that‚Äôs labeled ‚Äún‚Äù.</li>
</ul>

<h2 id="strings">Strings</h2>

<ul>
  <li data-marker="*">We can declare a string with <code class="language-plaintext highlighter-rouge">string s = "HI!";</code>, which will be stored one character at a time in memory. And we can access each character with <code class="language-plaintext highlighter-rouge">s[0]</code>, <code class="language-plaintext highlighter-rouge">s[1]</code>, <code class="language-plaintext highlighter-rouge">s[2]</code>, and <code class="language-plaintext highlighter-rouge">s[3]</code>:<br>
<img src="s_array.png" alt="boxes side by side, containing: H labeled s[0], I labeled s[1], ! labeled s[2], \0 labeled s[3]" width="200"></li>
  <li data-marker="*">But it turns out that each character, since it‚Äôs stored in memory, <em>also</em> has some unique address, and <code class="language-plaintext highlighter-rouge">s</code> is actually just a pointer with the address of the first character:<br>
<img src="s_pointer.png" alt="box containing 0x123 labeled s, boxes side by side containing H labeled 0x123, I labeled 0x124, ! labeled 0x125, \0 labeled 0x126" width="400">
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">s</code> is a variable of type <code class="language-plaintext highlighter-rouge">string</code>, which is a pointer to a character.</li>
      <li data-marker="*">Recall that we can read the entire string by starting at the address in <code class="language-plaintext highlighter-rouge">s</code>, and continue reading one character at a time from memory until we reach <code class="language-plaintext highlighter-rouge">\0</code>.</li>
    </ul>
  </li>
  <li data-marker="*">It turns out that <code class="language-plaintext highlighter-rouge">string s = "HI!"</code> is the same as <code class="language-plaintext highlighter-rouge">char *s = "HI!";</code>. And we can use strings in C in the exact same way without the CS50 Library, by using <code class="language-plaintext highlighter-rouge">char *</code>.</li>
  <li data-marker="*">Let‚Äôs print out a string:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
HI!
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Now, we can remove the CS50 Library, and say:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
HI!
</code></pre></div>    </div>
  </li>
  <li data-marker="*">We can experiment and see the address of characters:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
0x402004
0x7ffd4227fdd7
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We store the first character of <code class="language-plaintext highlighter-rouge">s</code> into <code class="language-plaintext highlighter-rouge">c</code>, and print out its address with <code class="language-plaintext highlighter-rouge">p</code>. We also print out <code class="language-plaintext highlighter-rouge">s</code> as an address with <code class="language-plaintext highlighter-rouge">%p</code>, and we see that the values are difference since we made a copy of the first character with <code class="language-plaintext highlighter-rouge">char c = s[0];</code>.</li>
    </ul>
  </li>
  <li data-marker="*">Now, we‚Äôll print the address of the first character in <code class="language-plaintext highlighter-rouge">s</code>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
0x402004
0x402004
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">With <code class="language-plaintext highlighter-rouge">char *p = &amp;s[0];</code>, we store the address of the first character in <code class="language-plaintext highlighter-rouge">s</code> into a pointer called <code class="language-plaintext highlighter-rouge">p</code>. And now, when we print <code class="language-plaintext highlighter-rouge">p</code> and <code class="language-plaintext highlighter-rouge">s</code> as addresses, we see the same value.</li>
    </ul>
  </li>
  <li data-marker="*">We can see the address of each character in <code class="language-plaintext highlighter-rouge">s</code>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
0x402004
0x402004
0x402005
0x402006
0x402007
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Again, the address of the first character, <code class="language-plaintext highlighter-rouge">&amp;s[0]</code>, is the same as the value of <code class="language-plaintext highlighter-rouge">s</code>. And each following character has an address that is one byte higher.</li>
    </ul>
  </li>
  <li data-marker="*">In the CS50 Library, a string is defined with just <code class="language-plaintext highlighter-rouge">typedef char *string;</code>. With <code class="language-plaintext highlighter-rouge">typedef</code>, we‚Äôre creating a custom data type for the word <code class="language-plaintext highlighter-rouge">string</code>, making it equivalent to <code class="language-plaintext highlighter-rouge">char *</code>.</li>
</ul>

<h2 id="pointer-arithmetic">Pointer arithmetic</h2>

<ul>
  <li data-marker="*">We can print out each character in a string:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
H
I
!

$
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">When we declare a <code class="language-plaintext highlighter-rouge">string</code> with double quotes, <code class="language-plaintext highlighter-rouge">"</code>, the compiler figures out where to put those characters in memory as an array.</li>
    </ul>
  </li>
  <li data-marker="*">Let‚Äôs simplify our code to use <code class="language-plaintext highlighter-rouge">char *</code> and show just the printable characters:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
H
I
!
</code></pre></div>    </div>
  </li>
  <li data-marker="*">But we can go to addresses directly:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">"HI!"</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%c</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">*s</code> goes to the address stored in <code class="language-plaintext highlighter-rouge">s</code>, and <code class="language-plaintext highlighter-rouge">*(s + 1)</code> goes to the location in memory with the next character, an address that is one byte higher.</li>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">s[1]</code> is <strong>syntactic sugar</strong>, like an abstraction for <code class="language-plaintext highlighter-rouge">*(s + 1)</code>, equivalent in function but more human-friendly to read and write.</li>
    </ul>
  </li>
  <li data-marker="*"><strong>Pointer arithmetic</strong> is the process of applying mathematical operations to pointers, using them just like numbers (which they are).</li>
  <li data-marker="*">We can declare an array of numbers, and access them with pointer arithmetic:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">numbers</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="n">numbers</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">3</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">4</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">5</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">numbers</span> <span class="o">+</span> <span class="mi">6</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make address
$ ./address
4
6
8
2
7
5
0
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">It turns out that we only need to add <code class="language-plaintext highlighter-rouge">1</code> to the address of <code class="language-plaintext highlighter-rouge">numbers</code>, instead of <code class="language-plaintext highlighter-rouge">4</code> (even though <code class="language-plaintext highlighter-rouge">int</code>s are 4 bytes in size), since the compiler already knows that the type of each value in <code class="language-plaintext highlighter-rouge">numbers</code> is 4 bytes. With <code class="language-plaintext highlighter-rouge">+ 1</code>, we‚Äôre telling the compiler to move the next value in the array, not the next byte.</li>
      <li data-marker="*">And notice that <code class="language-plaintext highlighter-rouge">numbers</code> is an array, but we can use it as a pointer with <code class="language-plaintext highlighter-rouge">*numbers</code>.</li>
    </ul>
  </li>
</ul>

<h2 id="compare-and-copy">Compare and copy</h2>

<ul>
  <li data-marker="*">Let‚Äôs try to compare two integers from the user:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">get_int</span><span class="p">(</span><span class="s">"i: "</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">get_int</span><span class="p">(</span><span class="s">"j: "</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Same</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Different</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make compare
$ ./compare
i: 50
j: 50
Same
$ ./compare
i: 50
j: 42
Different
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We compile and run our program, and it works as we‚Äôd expect, with the same values of the two integers giving us ‚ÄúSame‚Äù and different values ‚ÄúDifferent‚Äù.</li>
    </ul>
  </li>
  <li data-marker="*">When we try to compare two strings, we see that the same inputs are causing our program to print ‚ÄúDifferent‚Äù:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"t: "</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="n">t</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Same</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Different</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make compare
$ ./compare
s: HI!
t: BYE!
Different
$ ./compare
s: HI!
t: HI!
Different
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Even when our inputs are the same, we see ‚ÄúDifferent‚Äù printed.</li>
      <li data-marker="*">Each ‚Äústring‚Äù is a pointer, <code class="language-plaintext highlighter-rouge">char *</code>, to a different location in memory, where the first character of each string is stored. So even if the characters in the string are the same, this will always print ‚ÄúDifferent‚Äù.</li>
    </ul>
  </li>
  <li data-marker="*">And <code class="language-plaintext highlighter-rouge">get_string</code>, this whole time, has been returning just a <code class="language-plaintext highlighter-rouge">char *</code>, or a pointer to the first character of a string from the user. Since we called <code class="language-plaintext highlighter-rouge">get_string</code> twice, we got two different pointers back.</li>
  <li data-marker="*">We can fix our program with:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"t: "</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Same</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Different</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make compare
$ ./compare
s: HI!
t: HI!
Same
</code></pre></div>    </div>
  </li>
  <li data-marker="*">We‚Äôll take a look at the values of <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">t</code> as pointers:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"t: "</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make compare
$ ./compare
s: HI!
t: HI!
0x19e06b0
0x19e06f0
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We see that the addresses of our two strings are indeed different.</li>
    </ul>
  </li>
  <li data-marker="*">Let‚Äôs visualize how this might look in our computer‚Äôs memory. Our first string might be at address 0x123, our second might be at 0x456, and <code class="language-plaintext highlighter-rouge">s</code> will have the value of <code class="language-plaintext highlighter-rouge">0x123</code>, pointing at that location, and <code class="language-plaintext highlighter-rouge">t</code> will have the value of <code class="language-plaintext highlighter-rouge">0x456</code>, pointing at another location:<br>
<img src="s_t.png" alt="box containing 0x123 labeled s, boxes side by side containing H labeled 0x123, I labeled 0x124, ! labeled 0x125, \0 labeled 0x126, box containing 0x456 labeled t, boxes side by side containing H labeled 0x456, I labeled 0x457, ! labeled 0x458, \0 labeled 0x459" width="600">
    <ul>
      <li data-marker="*">Since our computer puts each string at some location in memory for us, we need <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">t</code> to point to each of them. And now we see why comparing <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">t</code> directly will always print ‚ÄúDifferent‚Äù. <code class="language-plaintext highlighter-rouge">strcmp</code>, in contrast, will go to each string and compare them character by character.</li>
    </ul>
  </li>
  <li data-marker="*">In C, we can also get the address of <code class="language-plaintext highlighter-rouge">s</code> or <code class="language-plaintext highlighter-rouge">t</code>, and store them in a variable of the type <code class="language-plaintext highlighter-rouge">char **</code>, a pointer to a pointer.</li>
  <li data-marker="*">Let‚Äôs try to copy a string:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ctype.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>

    <span class="n">string</span> <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>

    <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"t: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make copy
$ ./copy
s: hi!
s: Hi!
t: Hi!
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We get a string <code class="language-plaintext highlighter-rouge">s</code>, and copy the value of <code class="language-plaintext highlighter-rouge">s</code> into <code class="language-plaintext highlighter-rouge">t</code>. Then, we capitalize the first letter in <code class="language-plaintext highlighter-rouge">t</code>.</li>
      <li data-marker="*">But when we run our program, we see that both <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">t</code> are now capitalized.</li>
    </ul>
  </li>
  <li data-marker="*">Since we set <code class="language-plaintext highlighter-rouge">s</code> and <code class="language-plaintext highlighter-rouge">t</code> to the same value, or the same address, they‚Äôre both pointing to the same character, and so we capitalized the same character in memory:<br>
<img src="s_t_copy.png" alt="box containing 0x123 labeled s, box containing 0x123 labeled t, boxes side by side containing h labeled 0x123, i labeled 0x124, ! labeled 0x125, \0 labeled 0x126" width="600">
<img src="s_t_pointing.png" alt="box labeled s pointing to H, box labeled t pointing to H, boxes side by side containing h labeled 0x123, i labeled 0x124, ! labeled 0x125, \0 labeled 0x126" width="600"></li>
</ul>

<h2 id="memory-allocation">Memory allocation</h2>

<ul>
  <li data-marker="*">To actually make a copy of a string, we have to do a little more work, and copy each character in <code class="language-plaintext highlighter-rouge">s</code> to somewhere else in memory.</li>
  <li data-marker="*">We‚Äôll need to use a new function, <strong><code class="language-plaintext highlighter-rouge">malloc</code></strong>, to <em>allocate</em> some number of bytes in memory. And we‚Äôll use <strong><code class="language-plaintext highlighter-rouge">free</code></strong> to mark memory as usable when we‚Äôre done with it, so the operating system can do something else with it.
    <ul>
      <li data-marker="*">Our computers might slow down if a program we‚Äôre running has a bug where it allocates more and more memory but never frees it. The operating system will take longer and longer to find enough available memory for our program.</li>
    </ul>
  </li>
  <li data-marker="*">Let‚Äôs copy a string now:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ctype.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"t: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We create a new variable to point to a new string with <code class="language-plaintext highlighter-rouge">char *t</code>. The argument to <code class="language-plaintext highlighter-rouge">malloc</code> is the number of bytes we‚Äôd like to use. We already know the length of <code class="language-plaintext highlighter-rouge">s</code>, but we need to add 1 for the terminating null character.</li>
      <li data-marker="*">Then, we copy each character, one at a time, with a <code class="language-plaintext highlighter-rouge">for</code> loop. We use <code class="language-plaintext highlighter-rouge">strlen(s) + 1</code> since we want to copy the null character too to end the string. In the loop, we set <code class="language-plaintext highlighter-rouge">t[i] = s[i]</code>, copying the characters.</li>
    </ul>
  </li>
  <li data-marker="*">We could also use a library function, <code class="language-plaintext highlighter-rouge">strcpy</code>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ctype.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">strcpy</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>

    <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"t: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>

    <span class="n">free</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make copy
$ ./copy
s: hi!
s: hi!
t: Hi!
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, we can capitalize the first letter of <code class="language-plaintext highlighter-rouge">t</code>.</li>
      <li data-marker="*">We‚Äôll remember to call <code class="language-plaintext highlighter-rouge">free</code> on <code class="language-plaintext highlighter-rouge">t</code>, since we allocated it ourselves.</li>
    </ul>
  </li>
  <li data-marker="*">We can add some error-checking to our program:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;ctype.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">t</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">strcpy</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">toupper</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"t: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>

    <span class="n">free</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">If our computer is out of memory, <code class="language-plaintext highlighter-rouge">malloc</code> will return <code class="language-plaintext highlighter-rouge">NULL</code>, the null pointer, or a special value of all <code class="language-plaintext highlighter-rouge">0</code> bits that indicates there isn‚Äôt an address to point to. So we should check for that case, and exit if <code class="language-plaintext highlighter-rouge">t</code> is <code class="language-plaintext highlighter-rouge">NULL</code>.</li>
      <li data-marker="*">We should also check that <code class="language-plaintext highlighter-rouge">t</code> has a length, before trying to capitalize the first character.</li>
    </ul>
  </li>
  <li data-marker="*">We can visualize how this looks in our computer‚Äôs memory:<br>
<img src="s_t_malloc.png" alt="box labeled s pointing to h at 0x123, box labeled t pointing to h at 0x456, boxes side by side containing h labeled 0x123, i labeled 0x124, ! labeled 0x125, \0 labeled 0x126, boxes side by side containing h labeled 0x456, i labeled 0x457, ! labeled 0x458, \0 labeled 0x459" width="600">
    <ul>
      <li data-marker="*">We‚Äôve allocated memory at <code class="language-plaintext highlighter-rouge">0x456</code> and set <code class="language-plaintext highlighter-rouge">t</code> to point to it. Then, we used <code class="language-plaintext highlighter-rouge">strcpy</code> to copy each character‚Äôs value, starting from the address <code class="language-plaintext highlighter-rouge">s</code> is pointing to, to the address <code class="language-plaintext highlighter-rouge">t</code> is pointing to.</li>
    </ul>
  </li>
</ul>

<h2 id="valgrind">valgrind</h2>

<ul>
  <li data-marker="*">Let‚Äôs allocate memory for some integers:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">72</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">73</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make memory
$ ./memory
$
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We‚Äôll use <code class="language-plaintext highlighter-rouge">malloc</code> to get enough memory for 3 times the size of an <code class="language-plaintext highlighter-rouge">int</code>, which we can find out with <code class="language-plaintext highlighter-rouge">sizeof</code>.</li>
      <li data-marker="*">We‚Äôve deliberately made a mistake where we forgot arrays are 0-indexed, and started at <code class="language-plaintext highlighter-rouge">x[1]</code> instead. Then, with <code class="language-plaintext highlighter-rouge">x[3]</code>, we‚Äôre trying to access memory beyond the bounds of what we have access to.</li>
      <li data-marker="*">We also don‚Äôt free the memory we‚Äôve allocated.</li>
      <li data-marker="*">When we compile and run our program, though, nothing seems to happen. It turns out that our mistake wasn‚Äôt bad enough to cause a segmentation fault this time, though it might next time.</li>
    </ul>
  </li>
  <li data-marker="*"><strong><code class="language-plaintext highlighter-rouge">valgrind</code></strong> is a command-line tool that we can use to run our program and see if it has any memory-related issues.</li>
  <li data-marker="*">We‚Äôll run <code class="language-plaintext highlighter-rouge">valgrind ./memory</code> after compiling, and we‚Äôll see a lot of output:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ valgrind ./memory
==5902== Memcheck, a memory error detector
==5902== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==5902== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==5902== Command: ./memory
==5902== 
==5902== Invalid write of size 4
==5902==    at 0x401162: main (memory.c:9)
==5902==  Address 0x4bd604c is 0 bytes after a block of size 12 alloc'd
==5902==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==5902==    by 0x401141: main (memory.c:6)
==5902== 
==5902== 
==5902== HEAP SUMMARY:
==5902==     in use at exit: 12 bytes in 1 blocks
==5902==   total heap usage: 1 allocs, 0 frees, 12 bytes allocated
==5902== 
==5902== 12 bytes in 1 blocks are definitely lost in loss record 1 of 1
==5902==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==5902==    by 0x401141: main (memory.c:6)
==5902== 
==5902== LEAK SUMMARY:
==5902==    definitely lost: 12 bytes in 1 blocks
==5902==    indirectly lost: 0 bytes in 0 blocks
==5902==      possibly lost: 0 bytes in 0 blocks
==5902==    still reachable: 0 bytes in 0 blocks
==5902==         suppressed: 0 bytes in 0 blocks
==5902== 
==5902== For lists of detected and suppressed errors, rerun with: -s
==5902== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We‚Äôll see some snippets like <code class="language-plaintext highlighter-rouge">Invalid write of size 4 at ... memory.c:9</code>, which gives us a hint to look at line 9, where we‚Äôre using <code class="language-plaintext highlighter-rouge">x[3]</code>.</li>
    </ul>
  </li>
  <li data-marker="*">We‚Äôll fix that mistake:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">72</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">73</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make memory
$ ./memory
$ valgrind ./memory
==6435== Memcheck, a memory error detector
==6435== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==6435== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==6435== Command: ./memory
==6435== 
==6435== 
==6435== HEAP SUMMARY:
==6435==     in use at exit: 12 bytes in 1 blocks
==6435==   total heap usage: 1 allocs, 0 frees, 12 bytes allocated
==6435== 
==6435== 12 bytes in 1 blocks are definitely lost in loss record 1 of 1
==6435==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==6435==    by 0x401141: main (memory.c:6)
==6435== 
==6435== LEAK SUMMARY:
==6435==    definitely lost: 12 bytes in 1 blocks
==6435==    indirectly lost: 0 bytes in 0 blocks
==6435==      possibly lost: 0 bytes in 0 blocks
==6435==    still reachable: 0 bytes in 0 blocks
==6435==         suppressed: 0 bytes in 0 blocks
==6435== 
==6435== For lists of detected and suppressed errors, rerun with: -s
==6435== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, we see less output, with only one error telling us <code class="language-plaintext highlighter-rouge">12 bytes ... are definitely lost</code>, in that we‚Äôve allocated them, but not freed them.</li>
    </ul>
  </li>
  <li data-marker="*">Once we free our memory, we‚Äôll see no errors:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">72</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">73</span><span class="p">;</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
    <span class="n">free</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make memory
$ ./memory
$ valgrind ./memory
==6812== Memcheck, a memory error detector
==6812== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==6812== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==6812== Command: ./memory
==6812== 
==6812== 
==6812== HEAP SUMMARY:
==6812==     in use at exit: 0 bytes in 0 blocks
==6812==   total heap usage: 1 allocs, 1 frees, 12 bytes allocated
==6812== 
==6812== All heap blocks were freed -- no leaks are possible
==6812== 
==6812== For lists of detected and suppressed errors, rerun with: -s
==6812== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="garbage-values">Garbage values</h2>

<ul>
  <li data-marker="*">Let‚Äôs take a look at this program:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>  
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">scores</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">scores</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make garbage
$ ./garbage
68476128
32765
0
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We declare an array, <code class="language-plaintext highlighter-rouge">scores</code>, but we didn‚Äôt initialize it with any values.</li>
      <li data-marker="*">The values in the array are <strong>garbage values</strong>, or whatever unknown values that were in memory, from whatever program was running in our computer before.</li>
    </ul>
  </li>
  <li data-marker="*">If we aren‚Äôt careful with how our programs access memory, users might end up seeing data from previous programs, like passwords. And if we try to go to an address that‚Äôs a garbage value, our program is likely to crash from a segmentation fault.</li>
  <li data-marker="*">We watch <a href="https://www.youtube.com/watch?v=3uLKjb973HU">Pointer Fun with Binky</a>, an animated video demonstrating pointers, <code class="language-plaintext highlighter-rouge">malloc</code>, and dereferencing. The code from the video might look like this in one program:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>   
    <span class="kt">int</span> <span class="o">*</span><span class="n">x</span><span class="p">;</span>  
    <span class="kt">int</span> <span class="o">*</span><span class="n">y</span><span class="p">;</span> 

    <span class="n">x</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>                    

    <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
    <span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>    

    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>        

    <span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>   
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">In the first two lines, we declare two pointers. Then, we allocate memory for <code class="language-plaintext highlighter-rouge">x</code>, but not <code class="language-plaintext highlighter-rouge">y</code>, so we can assign a value to the memory <code class="language-plaintext highlighter-rouge">x</code> is pointing to with <code class="language-plaintext highlighter-rouge">*x = 42;</code>. But <code class="language-plaintext highlighter-rouge">*y = 13;</code> is problematic, since we haven‚Äôt allocated any memory for <code class="language-plaintext highlighter-rouge">y</code>, and the garbage value there points to some area in memory we likely don‚Äôt have access to.</li>
      <li data-marker="*">We can write <code class="language-plaintext highlighter-rouge">y = x;</code> so that <code class="language-plaintext highlighter-rouge">y</code> points to the same allocated memory as <code class="language-plaintext highlighter-rouge">x</code>, and use <code class="language-plaintext highlighter-rouge">*y = 13;</code> to set the value there.</li>
    </ul>
  </li>
</ul>

<h2 id="swap">Swap</h2>

<ul>
  <li data-marker="*">We‚Äôll have a volunteer on stage try to swap two liquids, one orange liquid in one glass, and one purple liquid in another. But we need a third glass to temporarily pour one liquid into, such as the orange liquid in the first glass. Then, we can pour the purple liquid into the first glass, and finally the orange liquid from the third glass into the second.</li>
  <li data-marker="*">Let‚Äôs try to swap the values of two integers:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make swap
$ ./swap
x is 1, y is 2
x is 1, y is 2
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">In our <code class="language-plaintext highlighter-rouge">swap</code> function, we have a third variable to use as temporary storage space as well. We put <code class="language-plaintext highlighter-rouge">a</code> into <code class="language-plaintext highlighter-rouge">tmp</code>, and then set <code class="language-plaintext highlighter-rouge">a</code> to the value of <code class="language-plaintext highlighter-rouge">b</code>, and finally <code class="language-plaintext highlighter-rouge">b</code> can be changed to the original value of <code class="language-plaintext highlighter-rouge">a</code>, now in <code class="language-plaintext highlighter-rouge">tmp</code>.</li>
      <li data-marker="*">But, if we tried to use that function in a program, we don‚Äôt see any changes.</li>
    </ul>
  </li>
  <li data-marker="*">It turns out that the <code class="language-plaintext highlighter-rouge">swap</code> function gets passed in copies of variables, <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code>, which are <strong>local variables</strong> that only the surrounding function can access. Changing those values won‚Äôt change <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> in the <code class="language-plaintext highlighter-rouge">main</code> function:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"a is %i, b is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"a is %i, b is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make swap
$ ./swap
x is 1, y is 2
a is 1, b is 2
a is 2, b is 1
x is 1, y is 2
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Our <code class="language-plaintext highlighter-rouge">swap</code> function works while we‚Äôre inside it.</li>
    </ul>
  </li>
</ul>

<h2 id="memory-layout">Memory layout</h2>

<ul>
  <li data-marker="*">Within our computer‚Äôs memory, different types of data that need to be stored for our program are organized into different sections:<br>
<img src="memory_layout.png" alt="Grid with sections, from top to bottom: machine code, globals, heap (with arrow pointing downward), stack (with arrow pointing upward)" width="250">
    <ul>
      <li data-marker="*">The <strong>machine code</strong> section is our compiled program‚Äôs binary code. When we run our program, that code is loaded into memory.</li>
      <li data-marker="*">Just below, or in the next part of memory, are <strong>global variables</strong> we declared in our program.</li>
      <li data-marker="*">The <strong>heap</strong> section is an empty area from where <code class="language-plaintext highlighter-rouge">malloc</code> can get free memory for our program to use. As we call <code class="language-plaintext highlighter-rouge">malloc</code>, we start allocating memory from the top down.</li>
      <li data-marker="*">The <strong>stack</strong> section is used by functions and local variables in our program as they are called, and grows upwards.</li>
    </ul>
  </li>
  <li data-marker="*">If we call <code class="language-plaintext highlighter-rouge">malloc</code> for too much memory, we will have a <strong>heap overflow</strong>, since we end up going past our heap. Or, if we call too many functions without returning from them, we will have a <strong>stack overflow</strong>, where our stack has too much memory allocated as well.</li>
  <li data-marker="*">Our program for swapping integers might have a stack that looks like this:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     | tmp       |  |  |  |  |
swap -------------------------
     | a    1    | b    2    |
     -------------------------
main | x    1    | y    2    |
     -------------------------
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Our <code class="language-plaintext highlighter-rouge">main</code> function has two local variables, <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>. Our <code class="language-plaintext highlighter-rouge">swap</code> function is created on top of <code class="language-plaintext highlighter-rouge">main</code> when it‚Äôs called, and has three local variables, <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">b</code>, and <code class="language-plaintext highlighter-rouge">tmp</code>.</li>
      <li data-marker="*">Once <code class="language-plaintext highlighter-rouge">swap</code> returns, its memory is freed and its values are now garbage values, and the variables in <code class="language-plaintext highlighter-rouge">main</code> haven‚Äôt been changed.</li>
    </ul>
  </li>
  <li data-marker="*">By passing in the address of <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code>, our <code class="language-plaintext highlighter-rouge">swap</code> function will be able to change the original values:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>
    <span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="o">*</span><span class="n">b</span><span class="p">;</span>
    <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">The addresses of <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> are passed in from <code class="language-plaintext highlighter-rouge">main</code> to <code class="language-plaintext highlighter-rouge">swap</code> with <code class="language-plaintext highlighter-rouge">&amp;x</code> and <code class="language-plaintext highlighter-rouge">&amp;y</code>, and we use the <code class="language-plaintext highlighter-rouge">int *a</code> syntax to declare that our <code class="language-plaintext highlighter-rouge">swap</code> function takes in pointers.</li>
      <li data-marker="*">We save the first value to <code class="language-plaintext highlighter-rouge">tmp</code> by following the pointer <code class="language-plaintext highlighter-rouge">a</code>, and then set the second value to location pointed to by <code class="language-plaintext highlighter-rouge">a</code> by following the second pointer <code class="language-plaintext highlighter-rouge">b</code>.</li>
      <li data-marker="*">Finally, we store the value of <code class="language-plaintext highlighter-rouge">tmp</code> to the location pointed to by <code class="language-plaintext highlighter-rouge">b</code>.</li>
    </ul>
  </li>
  <li data-marker="*">Our stack might look like this:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     | tmp       |  |  |  |  |
swap -------------------------
     | a  0x123  | b  0x127  |
     -------------------------
main | x    1    | y    2    |
     -------------------------
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">If <code class="language-plaintext highlighter-rouge">x</code> is at <code class="language-plaintext highlighter-rouge">0x123</code>, <code class="language-plaintext highlighter-rouge">a</code> will contain that value. <code class="language-plaintext highlighter-rouge">b</code> will have the address of <code class="language-plaintext highlighter-rouge">y</code>, <code class="language-plaintext highlighter-rouge">0x127</code>.</li>
    </ul>
  </li>
  <li data-marker="*">Our first step will be putting the value of <code class="language-plaintext highlighter-rouge">x</code> into <code class="language-plaintext highlighter-rouge">tmp</code> by following the pointer <code class="language-plaintext highlighter-rouge">a</code>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     | tmp  1    |  |  |  |  |
swap -------------------------
     | a  0x123  | b  0x127  |
     -------------------------
main | x    1    | y    2    |
     -------------------------
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Then, we‚Äôll follow the pointer <code class="language-plaintext highlighter-rouge">b</code>, and store the value there into the location pointed to by <code class="language-plaintext highlighter-rouge">a</code>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     | tmp  1    |  |  |  |  |
swap -------------------------
     | a  0x123  | b  0x127  |
     -------------------------
main | x    2    | y    2    |
     -------------------------
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Finally, we‚Äôll go to the location pointed to by <code class="language-plaintext highlighter-rouge">b</code>, and put the value of <code class="language-plaintext highlighter-rouge">tmp</code> into it:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     |  |  |  |  |  |  |  |  |
     -------------------------
     | tmp  1    |  |  |  |  |
swap -------------------------
     | a  0x123  | b  0x127  |
     -------------------------
main | x    2    | y    1    |
     -------------------------
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Now, <code class="language-plaintext highlighter-rouge">swap</code> can return, and the variables in <code class="language-plaintext highlighter-rouge">main</code> will still be changed.</li>
  <li data-marker="*">In our program, we‚Äôll need to pass in the addresses of <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> to our <code class="language-plaintext highlighter-rouge">swap</code> function:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">b</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"x is %i, y is %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>
    <span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="o">*</span><span class="n">b</span><span class="p">;</span>
    <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make swap
$ ./swap
x is 1, y is 2
x is 2, y is 1
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">With <code class="language-plaintext highlighter-rouge">&amp;x</code>, we can get the address of <code class="language-plaintext highlighter-rouge">x</code> to pass in.</li>
    </ul>
  </li>
</ul>

<h2 id="scanf">scanf</h2>

<ul>
  <li data-marker="*">We can get an integer from the user with a C library function, <code class="language-plaintext highlighter-rouge">scanf</code>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"x: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%i"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"x: %i</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make scanf 
$ ./scanf
x: 50
x: 50
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">scanf</code> takes a format, <code class="language-plaintext highlighter-rouge">%i</code>, so the input is ‚Äúscanned‚Äù for that format. We also pass in the address in memory where we want that input to go with <code class="language-plaintext highlighter-rouge">&amp;x</code>.</li>
    </ul>
  </li>
  <li data-marker="*">We can try to get a string the same way:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ clang -o scanf scanf.c
$ ./scanf
s: HI!
s: (null)
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">make</code> prevents us from making this mistake, so we‚Äôll use <code class="language-plaintext highlighter-rouge">clang</code> to demonstrate.</li>
      <li data-marker="*">We haven‚Äôt actually allocated any memory for <code class="language-plaintext highlighter-rouge">s</code>, so <code class="language-plaintext highlighter-rouge">scanf</code> is writing our string to an unknown address in memory.</li>
    </ul>
  </li>
  <li data-marker="*">We can call <code class="language-plaintext highlighter-rouge">malloc</code> to allocate memory:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ clang -o scanf scanf.c
$ ./scanf
s: HI!
s: HI!
</code></pre></div>    </div>
  </li>
  <li data-marker="*">And we can declare an array of 4 characters:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: "</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"s: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ clang -o scanf scanf.c
$ ./scanf
s: helloooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
s: helloooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
Segmentation fault (core dumped)
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Now, if the user types in a string of length 3 or less, our program will work safely. But if the user types in a longer string, <code class="language-plaintext highlighter-rouge">scanf</code> might be trying to write past the end of our array into unknown memory, causing our program to crash.</li>
    </ul>
  </li>
  <li data-marker="*"><code class="language-plaintext highlighter-rouge">get_string</code> from the CS50 library continuously allocates more memory as <code class="language-plaintext highlighter-rouge">scanf</code> reads in more characters, so it doesn‚Äôt have this issue.</li>
</ul>

<h2 id="files">Files</h2>

<ul>
  <li data-marker="*">With the ability to use pointers, we can also open files, like a digital phone book in <a href="https://cdn.cs50.net/2021/fall/lectures/4/src4/phonebook.c?highlight"><code class="language-plaintext highlighter-rouge">phonebook.c</code></a>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Saves names and numbers to a CSV file</span>
  
<span class="cp">#include</span> <span class="cpf">&lt;cs50.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp">
</span>  
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Open CSV file</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">"phonebook.csv"</span><span class="p">,</span> <span class="s">"a"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Get name and number</span>
    <span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"Name: "</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">number</span> <span class="o">=</span> <span class="n">get_string</span><span class="p">(</span><span class="s">"Number: "</span><span class="p">);</span>
  
    <span class="c1">// Print to file</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">"%s,%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">number</span><span class="p">);</span>
  
    <span class="c1">// Close file</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*"><code class="language-plaintext highlighter-rouge">fopen</code> is a new function we can use to open a file with a new type, <code class="language-plaintext highlighter-rouge">FILE</code>.</li>
      <li data-marker="*">We can use <code class="language-plaintext highlighter-rouge">fprintf</code> to write to a file.</li>
      <li data-marker="*">We‚Äôll see more details about working with files in this week‚Äôs problem set.</li>
    </ul>
  </li>
</ul>

<h1 id="jpeg">JPEG</h1>

<ul>
  <li data-marker="*">Let‚Äôs look at a program that opens a file and tells us if it‚Äôs a JPEG file, a particular format for image files, with <a href="https://cdn.cs50.net/2021/fall/lectures/4/src4/jpeg.c?highlight"><code class="language-plaintext highlighter-rouge">jpeg.c</code></a>:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Detects if a file is a JPEG</span>
  
<span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span>  
<span class="k">typedef</span> <span class="kt">uint8_t</span> <span class="n">BYTE</span><span class="p">;</span>
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="c1">// Check usage</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Open file</span>
    <span class="kt">FILE</span> <span class="o">*</span><span class="n">file</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">"r"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">// Read first three bytes</span>
    <span class="n">BYTE</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="n">fread</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">BYTE</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">file</span><span class="p">);</span>
  
    <span class="c1">// Check first three bytes</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span> <span class="o">&amp;&amp;</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xd8</span> <span class="o">&amp;&amp;</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Yes, possibly</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"No</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
  
    <span class="c1">// Close file</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ make jpeg
$ ./jpeg .src4/lecture.jpg
Yes, possibly
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">First, we define a <code class="language-plaintext highlighter-rouge">BYTE</code> as 8 bits, so we can refer to a byte as a type more easily in C.</li>
      <li data-marker="*">Then, we‚Äôll read from a file with a function called <code class="language-plaintext highlighter-rouge">fread</code>.</li>
      <li data-marker="*">We can compare the first three bytes (in hexadecimal) to the three bytes required to begin a JPEG file. If they‚Äôre the same, then our file is likely to be a JPEG file (though, other types of files may still begin with those bytes). But if they‚Äôre not the same, we know it‚Äôs definitely not a JPEG file.</li>
    </ul>
  </li>
  <li data-marker="*">It turns out that BMP files, another format for images, have even more bytes in its header, or beginning of the file.</li>
  <li data-marker="*">We‚Äôll learn more about these in this week‚Äôs problem set as well, and even implement our own version of image filters, like one that only shows the color red:
    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"helpers.h"</span><span class="cp">
</span>  
<span class="c1">// Only let red through</span>
<span class="kt">void</span> <span class="nf">filter</span><span class="p">(</span><span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="n">RGBTRIPLE</span> <span class="n">image</span><span class="p">[</span><span class="n">height</span><span class="p">][</span><span class="n">width</span><span class="p">])</span>
<span class="p">{</span>
    <span class="c1">// Loop over all pixels</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">width</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">image</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">].</span><span class="n">rgbtBlue</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
            <span class="n">image</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">].</span><span class="n">rgbtGreen</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Here, we have a loop that iterates over all the pixels in a two-dimensional array, and sets the blue and green values to 0.</li>
    </ul>
  </li>
</ul>


                </main>

            </div>

        </div>

        
 
        <script src="../../assets/page.js%3F1644944113"></script>

    


</body></html>